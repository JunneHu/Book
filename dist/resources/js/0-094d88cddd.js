(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1dND":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={clearNoNum:function(e){e.value=e.value.replace(/[^\d.]/g,""),e.value=e.value.replace(/\.{2,}/g,"."),e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.value.indexOf(".")<0&&""!=e.value&&(e.value=parseFloat(e.value))},accAdd:function(e,t){var o,n,r;try{o=e.toString().split(".")[1].length}catch(e){o=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}return r=Math.pow(10,Math.max(o,n)),(Math.round(e*r)+Math.round(t*r))/r},accDiv:function(e,t){var o,n,r=0,a=0;r=0,a=0;try{r=e.toString().split(".")[1].length}catch(e){}try{a=t.toString().split(".")[1].length}catch(e){}try{o=Number(e.toString().replace(".","")),n=Number(t.toString().replace(".",""))}catch(e){}return o/n*Math.pow(10,a-r)},Subtr:function(e,t){var o,n,r;try{o=e.toString().split(".")[1].length}catch(e){o=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}return((e*(r=Math.pow(10,Math.max(o,n)))-t*r)/r).toFixed(o>=n?o:n)},accMul:function(e,t){var o=0,n=e.toString(),r=t.toString();try{o+=n.split(".")[1].length}catch(e){}try{o+=r.split(".")[1].length}catch(e){}return Number(n.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,o)},swapItems:function(e,t,o){return e[t]=e.splice(o,1,e[t])[0],e},latestTime:function(e,t,o){function n(e){return e<10&&(e="0"+e),e}function r(){o.timer&&clearInterval(o.timer);var r=t,a=new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds());a<r||(o.timer=setInterval(function(){!function(e){var t=new Date(e)-new Date,r=parseInt(t/1e3/60/60/24,10),a=parseInt(t/1e3/60/60%24,10),s=parseInt(t/1e3/60%60,10),i=parseInt(t/1e3%60,10),c=[r=n(r),a=n(a),s=n(s),i=n(i)];if(r>=0||a>=0||s>=0||i>=0)return o.setState({latestTextArr:c});r<=0&&a<=0&&s<=0&&i<=0&&clearInterval(o.timer)}(a)},1e3))}r()},stringCutOut:function(e,t){return e.length>t?e.substring(0,t)+"...":e},isAlipayOrWechat:function(){var e=navigator.userAgent.toLowerCase();return"alipay"==e.match(/Alipay/i)?0:"micromessenger"==e.match(/MicroMessenger/i)?1:2}}},GBY4:function(e,t,o){"use strict";(function(t){var n=o("RA0T"),r=o("nFlj"),a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function l(e){var o,n={},r=typeof(e=e||t.location||{});if("blob:"===e.protocol)n=new u(unescape(e.pathname),{});else if("string"===r)for(o in n=new u(e,{}),c)delete n[o];else if("object"===r){for(o in e)o in c||(n[o]=e[o]);void 0===n.slashes&&(n.slashes=s.test(e.href))}return n}function p(e){var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function u(e,t,o){if(!(this instanceof u))return new u(e,t,o);var a,s,c,h,d,f,g=i.slice(),v=typeof t,m=this,y=0;for("object"!==v&&"string"!==v&&(o=t,t=null),o&&"function"!=typeof o&&(o=r.parse),t=l(t),a=!(s=p(e||"")).protocol&&!s.slashes,m.slashes=s.slashes||a&&t.slashes,m.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(g[2]=[/(.*)/,"pathname"]);y<g.length;y++)c=(h=g[y])[0],f=h[1],c!=c?m[f]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof h[2]?(m[f]=e.slice(0,d),e=e.slice(d+h[2])):(m[f]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(m[f]=d[1],e=e.slice(0,d.index)),m[f]=m[f]||a&&h[3]&&t[f]||"",h[4]&&(m[f]=m[f].toLowerCase());o&&(m.query=o(m.query)),a&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=function(e,t){for(var o=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=o.length,r=o[n-1],a=!1,s=0;n--;)"."===o[n]?o.splice(n,1):".."===o[n]?(o.splice(n,1),s++):s&&(0===n&&(a=!0),o.splice(n,1),s--);return a&&o.unshift(""),"."!==r&&".."!==r||o.push(""),o.join("/")}(m.pathname,t.pathname)),n(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(h=m.auth.split(":"),m.username=h[0]||"",m.password=h[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}u.prototype={set:function(e,t,o){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(o||r.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,/:\d+$/.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!o;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";a[e]=t.charAt(0)!==s?s+t:t}else a[e]=t;break;default:a[e]=t}for(var c=0;c<i.length;c++){var l=i[c];l[4]&&(a[l[1]]=a[l[1]].toLowerCase())}return a.origin=a.protocol&&a.host&&"file:"!==a.protocol?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,o=this,n=o.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var a=n+(o.slashes?"//":"");return o.username&&(a+=o.username,o.password&&(a+=":"+o.password),a+="@"),a+=o.host+o.pathname,(t="object"==typeof o.query?e(o.query):o.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),o.hash&&(a+=o.hash),a}},u.extractProtocol=p,u.location=l,u.qs=r,e.exports=u}).call(this,o("yLpj"))},J1Ju:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o("QUzF"),a=(n=r)&&n.__esModule?n:{default:n};t.default=a.default},PSCM:function(e,t,o){},QUzF:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,a=g(o("QbLZ")),s=g(o("Yz+Y")),i=g(o("iCc5")),c=g(o("V7oC")),l=g(o("FYw3")),p=g(o("mRg0")),u=g(o("q1tI")),h=(g(o("17x9")),o("MuoO")),d=g(o("GBY4")),f=g(o("1dND"));function g(e){return e&&e.__esModule?e:{default:e}}o("PSCM");var v=(n=function(e){function t(e){(0,i.default)(this,t);var o=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));r.call(o);var n=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{},a=(0,d.default)(o.props.location.search,!0).query,c=a.backUrl,p=a.auth_code,u=a.code,h=a.service_ticket,g=a.userid,v=a.accesstoken,m=a.aqiyi,y=f.default.isAlipayOrWechat();return o.state={shopInfo:n,payType:y,backUrl:c?decodeURIComponent(c):"",auth_code:p,code:u,service_ticket:h,userid:g,accesstoken:v,aqiyi:m},o}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.Auth()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,o=this.state,n=o.shopInfo,r=o.backUrl,a=o.userid,s=o.accesstoken,i=""+n.urlAddress.split("?")[0]+r+(r.includes("?")?"&":"?")+n.urlAddress.split("?")[1],c=e.login,l=c.getWechatUserInfo,p=c.getAlipayUserInfo,u=c.jointloginauthorizedjym,h=c.jointloginauthorized,d=c.getOtherUserInfo;if(l!==t.login.getWechatUserInfo){var f=l.code,g=l.data;l.message;"0"===f&&(i=i.indexOf("?")>-1?i+"&openId="+g.openId+"&token="+g.token:i+"?openId="+g.openId+"&token="+g.token,window.location.href=i)}if(p!==t.login.getAlipayUserInfo){var v=p.code,m=p.data;p.message;"0"===v&&(i=i.indexOf("?")>-1?i+"&openId="+m.openId+"&token="+m.token:i+"?openId="+m.openId+"&token="+m.token,window.location.href=i)}if(u!==t.login.jointloginauthorizedjym){var y=u.code,I=u.data;u.message;"0"===y&&(i=i.indexOf("?")>-1?i+"&openId="+I.openId+"&token="+I.token:i+"?openId="+I.openId+"&token="+I.token,window.location.href=i)}if(h!==t.login.jointloginauthorized){var w=h.code,k=h.data;h.message;"0"===w&&(i.indexOf("?")>-1?(i=i+"&openId="+k.openId+"&token="+k.token,a&&(i=i+"&userid="+a),s&&(i=i+"&accesstoken="+s)):(i=i+"?openId="+k.openId+"&token="+k.token,a&&(i=i+"&userid="+a),s&&(i=i+"&accesstoken="+s)),window.location.href=i)}if(d!==t.login.getOtherUserInfo){var b=d.code,U=d.data;d.message;"0"===b&&(i=i.indexOf("?")>-1?i+"&openId="+U.openId+"&token="+U.token:i+"?openId="+U.openId+"&token="+U.token,window.location.href=i)}}},{key:"render",value:function(){return u.default.createElement("div",{className:"auth-txt"},"授权中，请稍后...")}}]),t}(u.default.Component),r=function(){var e=this;this.getUserInfo=function(t,o){var n=e.state.shopInfo,r="",a=null;switch(o){case"ali":r="login/getAlipayUserInfo";break;case"wechat":r="login/getWechatUserInfo";break;case"jym":r="login/jointloginauthorizedjym";break;case"userid":r="login/jointloginauthorized",a=1;break;case"accesstoken":r="login/jointloginauthorized",a=2;break;case"nocode":r="login/getOtherUserInfo"}e.props.dispatch({type:r,payload:{merinfo:n.merInfoId,code:t,appId:n.appId,codeType:a,merCode:n.codeKey}})},this.Auth=function(){var t=e.state,o=t.payType,n=t.shopInfo,r=(t.entry,t.auth_code),a=t.code,s=(t.backUrl,t.service_ticket),i=t.userid,c=t.accesstoken,l=window.location.href;if(0===o)if(r)e.getUserInfo(r,"ali");else{var p="https://openauth.alipay.com/oauth2/publicAppAuthorize.htm?app_id="+n.appId+"&scope=auth_user&redirect_uri="+encodeURIComponent(l);window.location.href=p}else if(1===o)if(a)e.getUserInfo(a,"wechat");else{var u="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+n.appId+"&redirect_uri="+encodeURIComponent(l)+"&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect";window.location.href=u}else if(1===n.visitType)if(i)e.getUserInfo(i,"userid");else if(c)e.getUserInfo(c,"accesstoken");else if(n.ownLoginUrl){if(!s)return!1;if(1!=s)e.getUserInfo(s,"jym");else{var h=n.ownLoginUrl+"&redirectUrl="+encodeURIComponent(l);window.location.href=h}}else{var d=n.urlAddress.split("?")[0]+"/nothing?"+n.urlAddress.split("?")[1];window.location.href=d}}},n);t.default=(0,h.connect)(function(e){return(0,a.default)({},e)})(v)},RA0T:function(e,t,o){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"Yz+Y":function(e,t,o){e.exports={default:o("+plK"),__esModule:!0}},nFlj:function(e,t,o){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var o=[];for(var r in"string"!=typeof t&&(t="?"),e)n.call(e,r)&&o.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,o=/([^=?&]+)=?([^&]*)/g,n={};t=o.exec(e);){var a=r(t[1]),s=r(t[2]);a in n||(n[a]=s)}return n}}}]);